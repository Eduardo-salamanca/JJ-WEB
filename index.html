<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1" name="viewport"/>
  <title>
   JJ-SCRIPT | Buy Transaction Scripts
  </title>
  <script src="https://cdn.tailwindcss.com">
  </script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet"/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&amp;display=swap" rel="stylesheet"/>
  <style>
   body {
      font-family: 'Inter', sans-serif;
    }
    /* Disable screenshot and print screen on Windows (partial) */
    body {
      -webkit-user-select: none; /* Safari */
      -moz-user-select: none; /* Firefox */
      -ms-user-select: none; /* IE10+/Edge */
      user-select: none; /* Standard */
    }
    /* Disable right click */
    body {
      -webkit-touch-callout: none; /* iOS Safari */
    }
    /* Hide scrollbar for script content */
    #script-content::-webkit-scrollbar {
      height: 8px;
    }
    #script-content::-webkit-scrollbar-thumb {
      background-color: rgba(255,255,255,0.3);
      border-radius: 4px;
    }
    /* Editable textarea styling */
    .editable-textarea {
      background-color: #1f2937; /* Tailwind gray-800 */
      color: #34d399; /* Tailwind green-400 */
      font-family: monospace;
      font-size: 0.875rem; /* text-sm */
      border-radius: 0.5rem; /* rounded-lg */
      padding: 1.5rem; /* p-6 */
      width: 100%;
      min-height: 300px;
      resize: vertical;
      outline: none;
      border: none;
      overflow-x: auto;
      white-space: pre-wrap;
      word-break: break-word;
    }
  </style>
 </head>
 <body class="bg-gray-50 min-h-screen flex flex-col">
  <header class="bg-indigo-700 text-white shadow-md">
   <div class="container mx-auto px-6 py-4 flex justify-between items-center">
    <a class="text-2xl font-bold tracking-wide" href="#">
     JJ-SCRIPT
    </a>
    <nav class="space-x-6 text-lg hidden md:flex">
     <a class="hover:text-indigo-300 transition" href="#scripts">
      Scripts
     </a>
     <a class="hover:text-indigo-300 transition" href="#buy">
      Buy
     </a>
     <a class="hover:text-indigo-300 transition" href="#about">
      About
     </a>
     <a class="hover:text-indigo-300 transition" href="#contact">
      Contact
     </a>
    </nav>
    <button class="md:hidden focus:outline-none" id="menu-btn">
     <i class="fas fa-bars text-2xl">
     </i>
    </button>
   </div>
   <nav class="hidden bg-indigo-600 text-white px-6 py-4 space-y-3 md:hidden" id="mobile-menu">
    <a class="block hover:text-indigo-300 transition" href="#scripts">
     Scripts
    </a>
    <a class="block hover:text-indigo-300 transition" href="#buy">
     Buy
    </a>
    <a class="block hover:text-indigo-300 transition" href="#about">
     About
    </a>
    <a class="block hover:text-indigo-300 transition" href="#contact">
     Contact
    </a>
   </nav>
  </header>
  <main class="flex-grow container mx-auto px-6 py-10">
   <section class="text-center max-w-3xl mx-auto mb-6">
    <h1 class="text-4xl md:text-5xl font-extrabold text-indigo-700 mb-4">
     JJ-SCRIPT
    </h1>
    <p class="text-lg text-gray-700">
     Your trusted marketplace for secure transaction scripts. Buy scripts with confidence and protect your code.
    </p>
   </section>
   <section class="max-w-md mx-auto mb-10">
    <label for="admin-code" class="block mb-2 font-semibold text-indigo-700 text-center text-lg">
     Enter Admin Access Code
    </label>
    <input autocomplete="off" class="w-full border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500 text-center text-lg" id="admin-code" maxlength="24" placeholder="Enter admin code here" type="password"/>
    <button class="mt-4 w-full bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-3 rounded-md transition" id="admin-submit" type="button">
     Submit Code
    </button>
    <p class="mt-2 text-center text-red-600 font-semibold hidden" id="admin-error">
     Invalid admin code.
    </p>
    <p class="mt-2 text-center text-green-600 font-semibold hidden" id="admin-success">
     Admin access granted. You can now edit scripts and thumbnails.
    </p>
   </section>
   <section class="mb-20" id="scripts" aria-live="polite" aria-atomic="true">
    <h2 class="text-3xl font-semibold text-indigo-700 mb-8 text-center flex items-center justify-center gap-4">
     Available Scripts
     <button aria-label="Toggle Admin Mode" class="text-sm bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-1 px-3 rounded transition focus:outline-none hidden" id="admin-toggle">
      Admin Mode
     </button>
    </h2>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-8" id="scripts-container">
     <div class="bg-white rounded-lg shadow-md p-6 flex flex-col script-card" data-script="Payment Gateway Script">
      <img alt="QRIS payment code displayed on a smartphone screen with transaction script interface in the background" class="rounded-md mb-4 object-cover h-40 w-full editable-img" data-script="Payment Gateway Script" height="200" src="https://storage.googleapis.com/a1aa/image/2b1ddc6d-d5d6-45b5-0111-27e9364631a4.jpg" width="400"/>
      <h3 class="text-xl font-semibold mb-2 editable-title" contenteditable="false" data-script="Payment Gateway Script">
       Payment Gateway Script
      </h3>
      <textarea aria-label="Editable description for Payment Gateway Script" class="text-gray-600 flex-grow resize-none border border-gray-300 rounded-md p-3 editable-description" data-script="Payment Gateway Script" readonly rows="4">
Secure and reliable payment gateway script for online transactions with fraud detection.
      </textarea>
      <div class="mt-4 flex items-center justify-between">
       <span class="text-indigo-700 font-bold text-lg editable-price" contenteditable="false" data-script="Payment Gateway Script">
        Rp 10.000
       </span>
       <button class="buy-btn bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded transition" data-price="49.99" data-script="Payment Gateway Script">
        Buy Now
       </button>
      </div>
     </div>
     <div class="bg-white rounded-lg shadow-md p-6 flex flex-col script-card" data-script="Inventory Management Script">
      <img alt="QRIS payment code displayed on a smartphone screen with inventory management script dashboard in the background" class="rounded-md mb-4 object-cover h-40 w-full editable-img" data-script="Inventory Management Script" height="200" src="https://storage.googleapis.com/a1aa/image/47b66a10-3035-471b-6f4c-94756ce1b9d0.jpg" width="400"/>
      <h3 class="text-xl font-semibold mb-2 editable-title" contenteditable="false" data-script="Inventory Management Script">
       Inventory Management Script
      </h3>
      <textarea aria-label="Editable description for Inventory Management Script" class="text-gray-600 flex-grow resize-none border border-gray-300 rounded-md p-3 editable-description" data-script="Inventory Management Script" readonly rows="4">
Manage your stock and sales efficiently with this easy-to-use inventory transaction script.
      </textarea>
      <div class="mt-4 flex items-center justify-between">
       <span class="text-indigo-700 font-bold text-lg editable-price" contenteditable="false" data-script="Inventory Management Script">
        Rp 10.000
       </span>
       <button class="buy-btn bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded transition" data-price="39.99" data-script="Inventory Management Script">
        Buy Now
       </button>
      </div>
     </div>
     <div class="bg-white rounded-lg shadow-md p-6 flex flex-col script-card" data-script="Order Processing Script">
      <img alt="QRIS payment code displayed on a smartphone screen with order processing script interface in the background" class="rounded-md mb-4 object-cover h-40 w-full editable-img" data-script="Order Processing Script" height="200" src="https://storage.googleapis.com/a1aa/image/92283331-f3ed-488a-0642-a67d578e3410.jpg" width="400"/>
      <h3 class="text-xl font-semibold mb-2 editable-title" contenteditable="false" data-script="Order Processing Script">
       Order Processing Script
      </h3>
      <textarea aria-label="Editable description for Order Processing Script" class="text-gray-600 flex-grow resize-none border border-gray-300 rounded-md p-3 editable-description" data-script="Order Processing Script" readonly rows="4">
Streamline your order processing with this robust transaction script designed for e-commerce.
      </textarea>
      <div class="mt-4 flex items-center justify-between">
       <span class="text-indigo-700 font-bold text-lg editable-price" contenteditable="false" data-script="Order Processing Script">
         Rp 10.000
       </span>
       <button class="buy-btn bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-2 px-4 rounded transition" data-price="44.99" data-script="Order Processing Script">
        Buy Now
       </button>
      </div>
     </div>
    </div>
   </section>
   <section class="mb-20 max-w-3xl mx-auto bg-white rounded-lg shadow-md p-8" id="buy">
    <h2 class="text-3xl font-semibold text-indigo-700 mb-6 text-center">
     Purchase Your Script
    </h2>
<!-- Export button - only visible to admin -->
<div id="admin-export-container" class="hidden text-center mb-6">
  <button id="export-btn" class="bg-green-600 hover:bg-green-700 text-white font-semibold py-2 px-4 rounded transition">
    Export Scripts Data
  </button>
</div>

    <form autocomplete="off" class="space-y-6" id="purchase-form" spellcheck="false">
     <div>
      <label class="block text-gray-700 font-semibold mb-2" for="script-select">
       Select Script
      </label>
      <select class="w-full border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500" id="script-select" name="script" required="">
       <option disabled="" selected="" value="">
        Select a script
       </option>
       <option data-price="10.000" value="Payment Gateway Script">
        Payment Gateway Script -  Rp 10.000
       </option>
       <option data-price="10.000" value="Inventory Management Script">
        Inventory Management Script -  Rp 10.000
       </option>
       <option data-price="10.000" value="Order Processing Script">
        Order Processing Script -  Rp 10.000
       </option>
      </select>
     </div>
     <div>
      <label class="block text-gray-700 font-semibold mb-2" for="buyer-name">
       Your Name
      </label>
      <input class="w-full border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500" id="buyer-name" name="buyerName" placeholder="Enter your full name" required="" type="text"/>
     </div>
     <div>
      <label class="block text-gray-700 font-semibold mb-2" for="buyer-email">
       Email Address
      </label>
      <input class="w-full border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500" id="buyer-email" name="buyerEmail" placeholder="Enter your email address" required="" type="email"/>
     </div>
     <div>
      <label class="block text-gray-700 font-semibold mb-2">
       Payment Method
      </label>
      <div class="flex items-center space-x-4">
       <img alt="QRIS payment logo in black and white" class="h-12 w-auto" height="40" src="https://storage.googleapis.com/a1aa/image/50fe4ec0-e7ad-4229-020a-dce99e2247f7.jpg" width="80"/>
       <span class="text-indigo-700 font-semibold text-lg">
        QRIS Only
       </span>
      </div>
     </div>
     
<p class="text-center text-indigo-700 font-semibold text-lg mb-4">
  To purchase a script, chat me on <a href="https://wa.me/62895325278129" target="_blank" class="underline text-green-600">WhatsApp</a> at <strong>0895-3252-78129</strong>.<br/>
  I will give you a code after payment. Enter it below to access your script.
</p>

<div class="mt-6">
  <label class="block text-gray-700 font-semibold mb-2" for="redeem-code">
    Enter Your Code
  </label>
  <input class="w-full border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500" id="redeem-code" name="redeemCode" placeholder="Paste the code here" required type="text"/>
</div>
<button class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-3 rounded-md transition" type="submit">
      Purchase Script
     </button>
    </form>
   </section>
   <section class="mb-20 max-w-4xl mx-auto text-center px-6" id="about">
    <h2 class="text-3xl font-semibold text-indigo-700 mb-6">
     About JJ-SCRIPT
    </h2>
    <p class="text-gray-700 text-lg leading-relaxed">
     JJ-SCRIPT is a dedicated platform for transaction script enthusiasts and developers. We provide high-quality, secure transaction scripts that you can purchase and integrate into your projects. Our scripts are designed with security and efficiency in mind, ensuring your transactions run smoothly and safely.
    </p>
   </section>
   <section class="mb-20 max-w-3xl mx-auto bg-white rounded-lg shadow-md p-8" id="contact">
    <h2 class="text-3xl font-semibold text-indigo-700 mb-6 text-center">
     Contact Us
    </h2>
    <form autocomplete="off" class="space-y-6" id="contact-form" spellcheck="false">
     <div>
      <label class="block text-gray-700 font-semibold mb-2" for="contact-name">
       Name
      </label>
      <input class="w-full border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500" id="contact-name" name="contactName" placeholder="Your name" required="" type="text"/>
     </div>
     <div>
      <label class="block text-gray-700 font-semibold mb-2" for="contact-email">
       Email
      </label>
      <input class="w-full border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500" id="contact-email" name="contactEmail" placeholder="Your email" required="" type="email"/>
     </div>
     <div>
      <label class="block text-gray-700 font-semibold mb-2" for="contact-message">
       Message
      </label>
      <textarea class="w-full border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500 resize-none" id="contact-message" name="contactMessage" placeholder="Your message" required="" rows="4"></textarea>
     </div>
     <button class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-3 rounded-md transition" type="submit">
      Send Message
     </button>
    </form>
   </section>
   <section class="max-w-5xl mx-auto mb-20 hidden" id="script-display">
    <h2 class="text-3xl font-semibold text-indigo-700 mb-6 text-center">
     Your Purchased Script
    </h2>
    <pre aria-label="Purchased script code block" class="bg-gray-900 text-green-400 font-mono text-sm rounded-lg p-6 overflow-x-auto select-none" id="script-content" tabindex="0">
    </pre>
    <p class="mt-4 text-center text-gray-600 italic select-none">
     Screenshot protection enabled. Copy and print disabled.
    </p>
   </section>
  </main>
  <footer class="bg-indigo-700 text-white py-6">
   <div class="container mx-auto px-6 text-center text-sm">
    [Your Trusted Script 2026]
   </div>
  </footer>
  <script>
   // Mobile menu toggle
    const menuBtn = document.getElementById('menu-btn');
    const mobileMenu = document.getElementById('mobile-menu');
    menuBtn.addEventListener('click', () => {
      mobileMenu.classList.toggle('hidden');
    });

    // Admin code and access
    const adminCodeInput = document.getElementById('admin-code');
    const adminSubmitBtn = document.getElementById('admin-submit');
    const adminError = document.getElementById('admin-error');
    const adminSuccess = document.getElementById('admin-success');
    const adminToggleBtn = document.getElementById('admin-toggle');
    const scriptsContainer = document.getElementById('scripts-container');
    const scriptSelect = document.getElementById('script-select');

    const ADMIN_CODE = 'N1COLE';

    let adminMode = true;

    adminSubmitBtn.addEventListener('click', () => {
      const enteredCode = adminCodeInput.value.trim();
      if (enteredCode === ADMIN_CODE) {
        adminError.classList.add('hidden');
        adminSuccess.classList.remove('hidden');
        adminCodeInput.value = '';
        adminCodeInput.disabled = true;
        adminSubmitBtn.disabled = true;
        adminToggleBtn.classList.remove('hidden');
        enableAdminMode();
        showExportButton(true);
      } else {
        adminError.classList.remove('hidden');
        adminSuccess.classList.add('hidden');
      }
    });

    // Enable admin mode immediately after correct code
    function enableAdminMode() {
      adminMode = true;
      adminToggleBtn.textContent = 'Exit Admin';
      toggleAdminEditing(true);
    }

    // Toggle admin mode button
    adminToggleBtn.addEventListener('click', () => {
      adminMode = !adminMode;
      adminToggleBtn.textContent = adminMode ? 'Exit Admin' : 'Admin Mode';
      toggleAdminEditing(adminMode);
    });

    // Store scripts data with editable fields
    let scriptsData = {
      "Payment Gateway Script": {
        price: "10.000",
        description: "Secure and reliable payment gateway script for online transactions with fraud detection.",
        imageSrc: "https://storage.googleapis.com/a1aa/image/2b1ddc6d-d5d6-45b5-0111-27e9364631a4.jpg",
        code: `// Payment Gateway Script
function processPayment(amount, cardDetails) {
  if (!validateCard(cardDetails)) {
    throw new Error('Invalid card details');
  }
  // Connect to payment processor API
  const response = paymentProcessor.charge(amount, cardDetails);
  if (response.success) {
    return 'Payment successful';
  } else {
    return 'Payment failed: ' + response.errorMessage;
  }
}

function validateCard(card) {
  // Basic Luhn check
  let sum = 0;
  let shouldDouble = false;
  for (let i = card.number.length - 1; i >= 0; i--) {
    let digit = parseInt(card.number.charAt(i));
    if (shouldDouble) {
      digit *= 2;
      if (digit > 9) digit -= 9;
    }
    sum += digit;
    shouldDouble = !shouldDouble;
  }
  return sum % 10 === 0;
}`
      },
      "Inventory Management Script": {
        price: "10.000",
        description: "Manage your stock and sales efficiently with this easy-to-use inventory transaction script.",
        imageSrc: "https://storage.googleapis.com/a1aa/image/47b66a10-3035-471b-6f4c-94756ce1b9d0.jpg",
        code: `// Inventory Management Script
class Inventory {
  constructor() {
    this.items = {};
  }

  addItem(id, name, quantity) {
    if (this.items[id]) {
      this.items[id].quantity += quantity;
    } else {
      this.items[id] = { name, quantity };
    }
  }

  removeItem(id, quantity) {
    if (!this.items[id] || this.items[id].quantity < quantity) {
      throw new Error('Insufficient stock');
    }
    this.items[id].quantity -= quantity;
    if (this.items[id].quantity === 0) {
      delete this.items[id];
    }
  }

  getStock(id) {
    return this.items[id] ? this.items[id].quantity : 0;
  }
}`
      },
      "Order Processing Script": {
        price: "10.000",
        description: "Streamline your order processing with this robust transaction script designed for e-commerce.",
        imageSrc: "https://storage.googleapis.com/a1aa/image/92283331-f3ed-488a-0642-a67d578e3410.jpg",
        code: `// Order Processing Script
function processOrder(order) {
  if (!order.items || order.items.length === 0) {
    throw new Error('Order must contain items');
  }
  order.status = 'Processing';
  for (const item of order.items) {
    if (!inventory.hasStock(item.id, item.quantity)) {
      order.status = 'Failed';
      return 'Order failed: Insufficient stock for ' + item.id;
    }
  }
  for (const item of order.items) {
    inventory.removeItem(item.id, item.quantity);
  }
  order.status = 'Completed';
  return 'Order processed successfully';
}

const inventory = {
  stock: { 'item1': 10, 'item2': 5 },
  hasStock(id, qty) {
    return this.stock[id] && this.stock[id] >= qty;
  },
  removeItem(id, qty) {
    if (this.hasStock(id, qty)) {
      this.stock[id] -= qty;
    }
  }
};`
      }
    };

    // Toggle admin editing on/off
    function toggleAdminEditing(enable) {
      // Titles
      document.querySelectorAll('.editable-title').forEach(el => {
        el.contentEditable = enable;
        el.classList.toggle('border', enable);
        el.classList.toggle('border-indigo-500', enable);
        el.classList.toggle('rounded', enable);
        el.classList.toggle('p-1', enable);
        el.setAttribute('aria-label', enable ? 'Editable script title' : '');
      });
      // Descriptions
      document.querySelectorAll('.editable-description').forEach(el => {
        el.readOnly = !enable;
        el.classList.toggle('border-indigo-500', enable);
        el.classList.toggle('bg-white', enable);
        el.classList.toggle('text-gray-900', enable);
        el.classList.toggle('text-gray-600', !enable);
      });
      // Prices
      document.querySelectorAll('.editable-price').forEach(el => {
        el.contentEditable = enable;
        el.classList.toggle('border', enable);
        el.classList.toggle('border-indigo-500', enable);
        el.classList.toggle('rounded', enable);
        el.classList.toggle('p-1', enable);
        el.setAttribute('aria-label', enable ? 'Editable script price' : '');
      });
      // Images
      document.querySelectorAll('.editable-img').forEach(img => {
        if (enable) {
          img.style.cursor = 'pointer';
          img.title = 'Click to change image (Admin only)';
          img.addEventListener('click', onImageClick);
        } else {
          img.style.cursor = 'default';
          img.title = '';
          img.removeEventListener('click', onImageClick);
        }
      });
    }

    // Image click handler for admin image editing
    function onImageClick(e) {
      if (!adminMode) return;
      const img = e.currentTarget;
      const scriptName = img.getAttribute('data-script');
      const input = document.createElement('input');
      input.type = 'file';
      input.accept = 'image/*';
      input.click();
      input.onchange = () => {
        const file = input.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = (ev) => {
            img.src = ev.target.result;
            // Update scriptsData imageSrc
            if (scriptsData[scriptName]) {
              scriptsData[scriptName].imageSrc = ev.target.result;
            }
          };
          reader.readAsDataURL(file);
        }
      };
    }

    // Save edits on blur or input for titles, descriptions, prices
    function saveEdits() {
      // Titles
      document.querySelectorAll('.editable-title').forEach(el => {
        el.addEventListener('blur', () => {
          const oldScriptName = el.getAttribute('data-script');
          if (!scriptsData[oldScriptName]) return;
          const newTitle = el.textContent.trim();
          if (newTitle.length === 0) {
            el.textContent = oldScriptName;
            return;
          }
          
          if (scriptsData[newTitle] && newTitle !== oldScriptName) {
            alert('Script name already exists.');
            el.textContent = oldScriptName;
            return;
          }

          if (newTitle !== oldScriptName) {
            // Update scriptsData key
            scriptsData[newTitle] = scriptsData[oldScriptName];
            saveToLocalStorage();
            delete scriptsData[oldScriptName];
            el.setAttribute('data-script', newTitle);
            // Update select option
            const option = [...scriptSelect.options].find(o => o.value === oldScriptName);
            if (option) {
              option.value = newTitle;
              option.textContent = `${newTitle} - $${scriptsData[newTitle].price}`;
            }
            // Update script-card data-script attribute
            const card = el.closest('.script-card');
            if (card) card.setAttribute('data-script', newTitle);
            // Update buy buttons data-script attribute
            document.querySelectorAll(`.buy-btn[data-script="${oldScriptName}"]`).forEach(btn => {
              btn.setAttribute('data-script', newTitle);
            });
            // Update editable-description and editable-price data-script attributes
            const desc = card.querySelector('.editable-description');
            if (desc) desc.setAttribute('data-script', newTitle);
            const price = card.querySelector('.editable-price');
            if (price) price.setAttribute('data-script', newTitle);
            const img = card.querySelector('.editable-img');
            if (img) img.setAttribute('data-script', newTitle);
          }
        });
      });
      // Descriptions
      document.querySelectorAll('.editable-description').forEach(el => {
        el.addEventListener('input', () => {
          const scriptName = el.getAttribute('data-script');
          if (!scriptsData[scriptName]) return;
          scriptsData[scriptName].description = el.value;
          saveToLocalStorage();
        });
      });
      // Prices
      document.querySelectorAll('.editable-price').forEach(el => {
        el.addEventListener('blur', () => {
          const scriptName = el.getAttribute('data-script');
          if (!scriptsData[scriptName]) return;
          let newPrice = el.textContent.trim().replace(/[^0-9.]/g, '');
          if (newPrice === '' || isNaN(newPrice)) {
            // Revert to old price if invalid
            el.textContent = `$${scriptsData[scriptName].price}`;
            return;
          }
          newPrice = parseFloat(newPrice).toFixed(2);
          scriptsData[scriptName].price = newPrice;
          saveToLocalStorage();
          el.textContent = `Rp ${newPrice}`;
          // Update select option text
          const option = [...scriptSelect.options].find(o => o.value === scriptName);
          if (option) {
            option.textContent = `${scriptName} - Rp ${newPrice}`;
            option.setAttribute('data-price', newPrice);
          }
          // Update buy buttons data-price attribute
          document.querySelectorAll(`.buy-btn[data-script="${scriptName}"]`).forEach(btn => {
            btn.setAttribute('data-price', newPrice);
          });
        });
      });
    }
    saveEdits();

    // Purchase form handling
    const purchaseForm = document.getElementById('purchase-form');
    const scriptDisplaySection = document.getElementById('script-display');
    const scriptContent = document.getElementById('script-content');

    purchaseForm.addEventListener('submit', (e) => {
      e.preventDefault();
      const formData = new FormData(purchaseForm);
      const selectedScript = formData.get('script');
      const buyerName = formData.get('buyerName').trim();
      const buyerEmail = formData.get('buyerEmail').trim();

      if (!selectedScript || !buyerName || !buyerEmail) {
        alert('Please fill in all fields.');
        return;
      }

      if (!scriptsData[selectedScript]) {
        alert('Selected script not found.');
        return;
      }

      
     const SCRIPT_CODES = {
  "Payment Gateway Script": ["JJ123"],
  "Inventory Management Script": ["VIP456"],
  "Order Processing Script": ["PAID789"]
};

if (!SCRIPT_CODES[selectedScript] || !SCRIPT_CODES[selectedScript].includes(enteredCode)) {
  alert('Invalid code for the selected script. Please enter the correct code given after payment.');
  return;
}

// Simulate purchase success
      alert(`Thank you, ${buyerName}! Your purchase of "${selectedScript}" was successful.`);

      // Display the purchased script with screenshot protection
      scriptDisplaySection.classList.remove('hidden');
      scriptContent.textContent = scriptsData[selectedScript].code || '// Script content not available';

      // Scroll to script display
      scriptDisplaySection.scrollIntoView({ behavior: 'smooth' });

      // Clear form
      purchaseForm.reset();
    });

    // Buy buttons on script cards
    scriptsContainer.addEventListener('click', (e) => {
      if (e.target.classList.contains('buy-btn')) {
        const btn = e.target;
        const scriptName = btn.getAttribute('data-script');
        if (!scriptName) return;
        const scriptSelectOption = [...scriptSelect.options].find(o => o.value === scriptName);
        if (scriptSelectOption) {
          scriptSelect.value = scriptName;
          window.scrollTo({
            top: document.getElementById('buy').offsetTop - 20,
            behavior: 'smooth',
          });
        }
      }
    });

    // Disable screenshot and print attempts
    window.addEventListener('keydown', (e) => {
      if (e.key === 'PrintScreen') {
        e.preventDefault();
        alert('Screenshots are disabled on this site.');
      }
      if ((e.ctrlKey || e.metaKey) && e.key.toLowerCase() === 'p') {
        e.preventDefault();
        alert('Printing is disabled on this site.');
      }
      if ((e.ctrlKey || e.metaKey) && e.key.toLowerCase() === 's') {
        e.preventDefault();
        alert('Saving the page is disabled on this site.');
      }
      if ((e.ctrlKey || e.metaKey) && e.key.toLowerCase() === 'c') {
        e.preventDefault();
        alert('Copying is disabled on this site.');
      }
    });

    window.addEventListener('contextmenu', (e) => {
      e.preventDefault();
      alert('Right-click is disabled on this site.');
    });

    window.addEventListener('dragstart', (e) => {
      e.preventDefault();
    });

    scriptContent.addEventListener('copy', (e) => {
      e.preventDefault();
      alert('Copying script content is disabled.');
    });
  
// ====== Local Storage Save/Load ======
function saveToLocalStorage() {
  localStorage.setItem('scriptsData', JSON.stringify(scriptsData));
}

function loadFromLocalStorage() {
  const saved = localStorage.getItem('scriptsData');
  if (saved) {
    try {
      scriptsData = JSON.parse(saved);
      for (const card of document.querySelectorAll('.script-card')) {
        const scriptName = card.getAttribute('data-script');
        const data = scriptsData[scriptName];
        if (!data) continue;

        const img = card.querySelector('.editable-img');
        if (img) img.src = data.imageSrc;

        const title = card.querySelector('.editable-title');
        if (title) title.textContent = scriptName;

        const desc = card.querySelector('.editable-description');
        if (desc) desc.value = data.description;

        const price = card.querySelector('.editable-price');
        if (price) price.textContent = `Rp ${data.price}`;
      }
    } catch (e) {
      console.error('Failed to load saved scriptsData:', e);
    }
  }
}
window.addEventListener('load', loadFromLocalStorage);

// ====== Export JSON File ======
function exportScriptsData() {
  const dataStr = "data:text/json;charset=utf-8," + encodeURIComponent(JSON.stringify(scriptsData, null, 2));
  const dlAnchor = document.createElement('a');
  dlAnchor.setAttribute("href", dataStr);
  dlAnchor.setAttribute("download", "scriptsData.json");
  dlAnchor.click();
}
document.getElementById('export-btn').addEventListener('click', exportScriptsData);

// ====== Show Export Button for Admins ======
function showExportButton(show) {
  const container = document.getElementById('admin-export-container');
  if (show) {
    container.classList.remove('hidden');
  } else {
    container.classList.add('hidden');
  }
}

// Update admin mode toggle logic
function enableAdminMode() {
  adminMode = true;
  adminToggleBtn.textContent = 'Exit Admin';
  toggleAdminEditing(true);
  showExportButton(true);
}

adminToggleBtn.addEventListener('click', () => {
  adminMode = !adminMode;
  adminToggleBtn.textContent = adminMode ? 'Exit Admin' : 'Admin Mode';
  toggleAdminEditing(adminMode);
  showExportButton(adminMode);
});

// Extra screenshot prevention
document.addEventListener("keyup", function(e) {
  if (e.key === "PrintScreen") {
    navigator.clipboard.writeText("");
    alert("Screenshot is blocked on this site.");
  }
});
</script>
 </body>
</html>
